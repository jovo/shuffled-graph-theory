function [As_syn ys_syn] = generate_synthetic_data(data,ys,nmc)

disp('Generating synthetic data....')

if ~isstruct(data)
    
    As=data;
    
    [n foo s]=size(As);
    
    s1=round(sum(ys)*nmc/s);
    s0=nmc-s1;
    
    constants   = get_constants(As,ys);
    P           = get_ind_edge_params(As,constants);
    
else
    
    
end



ix=randperm(nmc); % arbitrary ordering

% generate graphs
As_syn = nan(n,n,nmc);
As_syn(:,:,ix(1:s0))    = repmat(P.E0,[1 1 s0]) > rand(n,n,s0);
As_syn(:,:,ix(s0+1:end))= repmat(P.E1,[1 1 s1]) > rand(n,n,s1);

% generate labels
ys_syn=nan(nmc,1);
ys_syn(ix(1:s0))=0;
ys_syn(ix(s0+1:end))=1;
